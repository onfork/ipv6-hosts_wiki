> 1e100.net 域名规则及服务器部署信息 

**已知1e100.net <a href="https://docs.google.com/spreadsheets/d/1a5HI0lkc1TycJdwJnCVDVd3x6_gemI3CQhNHhdsVmP8" target="_blank">部署信息表格</a>**
 
简介
----
1e100.net 是 Google 2009年10月启用的域名，名字来源于 <a href="http://en.wikipedia.org/wiki/Googol" target="_blank">googol</a> (1e100 = 1 googol)，google 这个单词同样来源于 googol。

普通用户平时只用到 Google 服务的域名，如 google.com，youtube.com，blogger.com 等，一般不会用到1e100.net域名。Google 对每台服务器都进行了编号，每个IP都会对应一个域名。因此 1e100.net 的每个二级域名都有一个固定的IP，不会随用户的网络环境进行变化。

这样做有两个好处：  
1.  方便进行管理 (根据域名快速确认服务器地理位置及编号)  
2.  防止跨站攻击  

 参见 https://support.google.com/faqs/answer/174717   


已知的 1e100.net 域名对应的 IP 段有：  
<pre><code>2607:f8b0::/32  美国   
2001:4860::/32  美国  
2a00:1450::/29  爱尔兰   
2404:6800::/32  澳大利亚</code></pre>  

域名规则 1 
---- 

<pre><code>域名正则表达式： [a-z]{3}[0-9]{2}<span="color:blue">s</span>[0-9]{2}-in-x[0-9a-f]{2}.1e100.net</code></pre>  
如 <code>dfw06s16-in-x1f.1e100.net</code>，只支持 IPv6 访问。  
<code>dfw</code> 是 <a href="http://en.wikipedia.org/wiki/International_Air_Transport_Association_airport_code" target="_blank">IATA机场代码</a>，代表“达拉斯-沃思堡国际机场”，也就是达拉斯市，貌似 Google 等很多 IT 公司都用距离服务器部署位置最近的机场的编码来表示地理位置。  
<code>-in-</code> 之后有个字母 x，表示其后两位编号是16进制，取值范围 0x00-0x1f，共32台。  
IPv6 第4段地址取值范围 800-80f，共16组服务器，但各地数量不同，地址池并未完全使用。  
IPv6 地址的末尾(第8段) 则是从1000到101f，和域名编号相对应。  

例如 **东京千叶** IP段为  2404:6800:4004::/48，IPv6 第4组从800到80f共16组服务器，每组32台，因此分管东京地区流量的共有512台服务器。
* 512台仅仅是 1e100.net 域名下的数量，而且是已知的，不包括其他域名及未知服务器。  
* 数据中心并不一定在东京，根据 Google 公布的<a href="https://www.google.com/about/datacenters/inside/locations/index.html" target="_blank">数据中心分布图</a>，其在全球共12处数据中心，亚洲地区两个，分别在台湾和新加坡。数据中心应该指的是 Google 出资建设的，其应该还会租用电信公司的机房，因此服务器实际数量要多得多。

> 与之对应的还有这种形式的  
<pre><code>域名正则表达式： [a-z]{3}[0-9]{2}s[0-9]{2}-in-f[0-9]{1-2}.1e100.net</code></pre>  
如 <code>dfw06s16-in-f31.1e100.net</code>，只支持 IPv4 访问。  
前面的编号相同，<code>-in-</code> 之后的字母则是 f，表示其后两位编号是10进制，取值范围 0-31，共32台。


典型地址：  
<pre><code>2607:f8b0:4000:800::1007 dfw06s16-in-x07.1e100.net</code></pre>

**已知服务器分布(部分)** <a href="https://docs.google.com/spreadsheets/d/1a5HI0lkc1TycJdwJnCVDVd3x6_gemI3CQhNHhdsVmP8" target="_blank">查看完整表格</a>  

|                |      |     |            | 800      | 801      |
|----------------|------|-----|:----------:|----------|----------|
| **2607:f8b0::/32** | 4000 | DFW | 达拉斯     | dfw06s16 | dfw06s17 |
| 美国           | 4005 | NUQ | 山景城     | nuq05s01 |          |
|                | 4006 | LGA | 纽约       | lga15s28 | lga15s29 |
|                | 4010 | NUQ | 山景城     | nuq04s18 | nuq04s19 |
| **2a00:1450::/29** | 4001 | FRA | 法兰克福   | fra07s27 | fra07s28 |
| 爱尔兰         | 4006 | MRS | 马赛       |          | mrs02s04 |
|                | 4008 | BER | 柏林       | ber01s08 | ber01s09 | 
|                | 4009 | LHR | 伦敦       | lhr14s23 | lhr14s24 |
| **2404:6800::/32** | 4003 | SIN | 新加坡     | sin01s04 | sin01s05 |
| 澳大利亚       | 4004 | NRT | 东京千叶   | nrt19s17 | nrt19s18 |
|                | 4005 | HKG | 香港       | hkg03s09 | hkg03s10 |
|                | 4007 | MAA | 金奈       | maa03s04 | maa03s05 |

域名规则 2 
---- 
<pre><code>域名正则表达式： t[a-z]-in-x[0-9a-f]{2}.1e100.net</code></pre>  
目前仅在台湾发现，即 IP 前缀为： **2404:6800:4008::**  
如 <code>tf-in-x64.1e100.net</code>，只支持 IPv6 访问。  
<code>t</code> 代表Taipei 台北。  
<code>-in-</code> 之后的 x 代表后面两位为16进制，取值范围 0x00-0xff，共256台。但是有一部分貌似未启用，可以查到域名的仅133台。  

典型地址：  
<pre><code>2404:6800:4008:c01::7b tf-in-x7b.1e100.net</code></pre>

**已知服务器分配**  

| IP 段 | 域名前缀 | DNS 可查数量 |
|----------------|:----:|----:|
| 2404:6800:4008:c00::/64| tb | 133 |
| 2404:6800:4008:c01::/64| tf | 133 |
| 2404:6800:4008:c02::/64| tg | 130 |

=====
> 注：部分域名可以到 http://1e100.net.dnsdb.org/ 查询，不过这个数据库很多地址已经失效。